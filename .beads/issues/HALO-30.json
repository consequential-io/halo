{
  "id": "HALO-30",
  "title": "Implement Agatha Orchestrator",
  "type": "task",
  "status": "open",
  "priority": 0,
  "description": "Implement AgathaController coordinating all agents.\n\n## Pattern\n```python\nfrom controllers.base_controller import BaseController\nfrom models.analyze_agent import AnalyzeAgentModel\nfrom models.recommend_agent import RecommendAgentModel\nfrom models.execute_agent import ExecuteAgentModel\n\nclass AgathaController(BaseController):\n    def __init__(self):\n        super().__init__()\n        self.analyze_agent = AnalyzeAgentModel().agent\n        self.recommend_agent = RecommendAgentModel().agent\n        self.execute_agent = ExecuteAgentModel().agent\n\n    async def run_full_flow(self, account_id: str, access_token: str = None):\n        # 1. Analyze\n        analysis = await self.run_agent_flow(\n            \"analyze_agent\", self.analyze_agent,\n            message_content=json.dumps({\"account_id\": account_id})\n        )\n        \n        # 2. Recommend (uses analysis output)\n        recommendations = await self.run_agent_flow(\n            \"recommend_agent\", self.recommend_agent,\n            message_content=json.dumps({\"analysis\": analysis})\n        )\n        \n        return recommendations\n        # Execute happens after user approval via separate endpoint\n\n    async def execute_approved(self, recommendations: list):\n        return await self.run_agent_flow(\n            \"execute_agent\", self.execute_agent,\n            message_content=json.dumps({\"recommendations\": recommendations})\n        )\n```",
  "labels": ["agent", "orchestrator", "core"],
  "created": "2026-01-31T08:00:00Z",
  "updated": "2026-01-31T08:00:00Z",
  "parent": "HALO-4",
  "blockedBy": ["HALO-25", "HALO-27", "HALO-29"]
}
